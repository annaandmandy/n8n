# 📈 AI 股票綜合分析系統

基於 Streamlit、FinMind API 和 OpenAI 的專業台股分析工具,整合技術分析與基本面分析。

## ✨ 功能特色

### 📊 技術分析
- **專業 K 線圖**: 互動式燭台圖表,支援縮放、平移等操作
- **移動平均線**: 自動計算 MA5、MA10、MA20、MA60
- **RSI 指標**: 相對強弱指標,顯示超買超賣狀態
- **成交量分析**: 視覺化成交量變化,紅綠柱狀圖對應漲跌
- **歷史數據展示**: 完整的歷史價格數據表格

### 💰 基本面分析
- **財務比率**: ROE, ROA, 毛利率, 淨利率, 流動比率, 負債比率, EPS
- **Piotroski F-Score**: 9項指標財務體質評分系統 (0-9分)
- **財報數據**: 最近期損益表和資產負債表數據
- **企業評估**: 獲利能力和財務健康度分析

### 🤖 AI 綜合分析
- **整合評估**: 同時考量技術面和基本面數據
- **協同判斷**: 識別技術指標與財務狀況的一致性或背離
- **風險分析**: 客觀的風險因子提示
- **教育性解讀**: 純粹基於歷史數據的分析

### 🎯 其他特色
- **台股數據源**: 支援所有台股股票代碼 (2330, 2317, 2454 等)
- **免費數據**: FinMind API 免費版可用,付費版可提升限制
- **分頁設計**: 清晰的3個分頁 (技術分析/基本面/AI綜合)

## 🚀 快速開始

### 1. 安裝依賴

```bash
pip install -r requirements.txt
```

### 2. 獲取 API 金鑰

#### OpenAI API Key (必填)
1. 前往 [OpenAI Platform](https://platform.openai.com)
2. 登入或註冊帳號
3. 在 API Keys 頁面創建新的 API 金鑰
4. 確保帳戶有足夠的餘額使用 GPT-4o-mini 模型

#### FinMind API Token (選填)
- **免費版**: 無需申請,可直接使用 (有請求限制)
- **付費版**: 前往 [FinMind](https://finmindtrade.com) 註冊並升級,可提升 API 請求限制
- 基本面分析功能建議使用 Token 以確保數據穩定獲取

### 3. 運行應用程式

```bash
streamlit run stock_analysis_app.py
```

### 4. 使用系統

1. 在左側側邊欄輸入:
   - **股票代碼** (例如: 2330, 2317, 2454)
   - **FinMind API Token** (選填,建議填寫以獲取財務數據)
   - **OpenAI API Key** (必填)
   - **日期範圍** (預設為最近 90 天,用於技術分析)
   - **RSI 週期** (預設 14 天,可調整 5-30)

2. 點擊「🔍 分析」按鈕

3. 系統將在 3 個分頁顯示:
   - **Tab 1 - 技術分析**: K線圖、RSI、成交量、技術指標統計
   - **Tab 2 - 基本面分析**: 財務比率、F-Score、財報數據
   - **Tab 3 - AI 綜合分析**: 整合技術面與基本面的完整評估

### 📌 常用台股代碼參考

- **2330** - 台積電
- **2317** - 鴻海
- **2454** - 聯發科
- **2412** - 中華電
- **2308** - 台達電
- **2882** - 國泰金
- **2881** - 富邦金
- **2303** - 聯電
- **2886** - 兆豐金
- **1301** - 台塑

## 📦 技術架構

- **界面框架**: Streamlit
- **數據來源**: FinMind API (台股價格數據 + 財務報表數據)
- **AI 模型**: OpenAI GPT-4o-mini
- **視覺化**: Plotly Graph Objects (K線圖、RSI圖、成交量圖)
- **數據處理**: Pandas, NumPy

## 📊 指標說明

### 技術指標
- **MA5/10/20/60**: 移動平均線 - 短/中/長期趨勢指標
- **RSI**: 相對強弱指標 (0-100)
  - RSI > 70: 超買區域
  - RSI < 30: 超賣區域
  - RSI = 50: 中線

### 財務指標
- **ROE**: 股東權益報酬率 = 淨利 / 股東權益
- **ROA**: 資產報酬率 = 淨利 / 總資產
- **毛利率**: 毛利 / 營收
- **淨利率**: 淨利 / 營收
- **流動比率**: 流動資產 / 流動負債
- **負債比率**: 總負債 / 總資產
- **EPS**: 每股盈餘

### Piotroski F-Score
9項指標評分系統 (0-9分):
- **7-9分**: 財務體質優秀
- **5-6分**: 財務體質良好
- **0-4分**: 財務體質需關注

評分項目包含:
1. ROA正值
2. 淨利正值
3. ROA年增
4. 毛利率改善
5. 等 9 項指標

## ⚠️ 免責聲明

本系統僅供學術研究與教育用途,AI 提供的數據與分析結果僅供參考,**不構成投資建議或財務建議**。

請使用者自行判斷投資決策,並承擔相關風險。本系統作者不對任何投資行為負責,亦不承擔任何損失責任。

歷史表現不代表未來結果。

## 📝 系統需求

- Python 3.8 或更高版本
- 穩定的網路連線
- 有效的 OpenAI API 金鑰

## 🛠️ 故障排除

### API 連線錯誤
- 檢查網路連線是否正常
- FinMind API 免費版無需金鑰,若連線失敗請稍後再試

### 找不到股票代碼
- 確認輸入的是有效的台股股票代碼 (四位數字)
- 常用代碼: 2330 (台積電)、2317 (鴻海)、2454 (聯發科)
- 不支援美股或其他市場股票

### AI 分析失敗
- 確認 OpenAI API 金鑰是否正確
- 檢查 OpenAI 帳戶是否有足夠的餘額
- 確認帳戶可使用 GPT-4o-mini 模型
- 確認網路連線穩定

### 無法獲取財務數據
- 免費版 FinMind API 有請求限制
- 建議註冊並使用 FinMind API Token
- 某些股票可能財報數據不完整
- 確認股票代碼正確且為上市櫃公司

### F-Score 顯示不足
- F-Score 需要至少 2 年財務數據才能計算
- 新上市公司可能數據不足
- 檢查是否有輸入 FinMind Token

### 數據範圍問題
- FinMind 價格數據從 2020 年開始
- 財務數據從 2019 年開始
- 如選擇的日期範圍過早,可能無法獲取數據

## 📄 授權

本專案僅供教育和研究用途。
